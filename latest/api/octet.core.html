<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><title>octet.core documentation</title></head><body><header><section class="title"><h1><a href="index.html">Octet Api Documentation</a></h1></section><small>Version: 1.1.0</small></header><section class="container"><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>octet</span></div></div></li><li class="depth-2 branch"><a href="octet.buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>buffer</span></div></a></li><li class="depth-2 branch current"><a href="octet.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="octet.spec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spec</span></div></a></li><li class="depth-3"><a href="octet.spec.reference.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reference</span></div></a></li><li class="depth-2"><a href="octet.util.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><section class="namespace-docs" id="content"><h2 class="anchor" id="top">octet.core</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-allocate"><h3><a href="#var-allocate">allocate</a></h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Polymorphic function for allocate new bytebuffers.</p>
<p>It allows allocate using different implementation of bytebuffers and different types of them.</p>
<p>As example, you may want allocate nio direct buffer of 4 bytes:</p>
<pre><code>(allocate 4 {:type :direct :impl :nio})
</code></pre>
<p>The supported options pairs are:</p>
<ul>
  <li>type: <code>:heap</code>, impl: <code>:nio</code> (default)</li>
  <li>type: <code>:direct</code>, impl: <code>:nio</code></li>
  <li>type: <code>:heap</code>, impl: <code>:netty</code></li>
  <li>type: <code>:direct</code>, impl: <code>:netty</code></li>
  <li>impl: <code>:es6</code> (clojurescript) (default)</li>
</ul>
<p>This function is defined as multimethod and you can extend it with your own bytebuffer implementations if you want or need it.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/buffer.cljc#L453">view source</a></div></div><div class="public anchor" id="var-bool"><h3><a href="#var-bool">bool</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Boolean type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L54">view source</a></div></div><div class="public anchor" id="var-byte"><h3><a href="#var-byte">byte</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Byte type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L83">view source</a></div></div><div class="public anchor" id="var-bytes"><h3><a href="#var-bytes">bytes</a></h3><div class="usage"><code>(bytes size)</code></div><div class="doc"><div class="markdown"><p>Fixed size byte array type spec constructor.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L101">view source</a></div></div><div class="public anchor" id="var-compose"><h3><a href="#var-compose">compose</a></h3><div class="usage"><code>(compose constructor types)</code></div><div class="doc"><div class="markdown"><p>Create a composed typespec with user defined type constructor.</p>
<p>This allows define a typespec with automatic conversion between user data type and serialized data without defining yourself a datatype using low level constructions.</p>
<p>Let see an exameple for understand it better.</p>
<p>Imagine you are have this data type:</p>
<pre><code>(defrecord Point [x y])
</code></pre>
<p>With help of <code>compose</code>, create a new spec for your datatype:</p>
<pre><code>(def point-spec (buf/compose -&gt;Point [buf/int32 buf/int32]))
</code></pre>
<p>Now, you can use the previously defined datatype and typespec for write into buffer:</p>
<pre><code>(buf/write! buffer mypoint point-spec)
;; =&gt; 8
</code></pre>
<p>Or read from the buffer:</p>
<pre><code>(buf/read buffer (point))
;; =&gt; #user.Point{:x 1, :y 2}
</code></pre></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec.cljc#L268">view source</a></div></div><div class="public anchor" id="var-double"><h3><a href="#var-double">double</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Double type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L98">view source</a></div></div><div class="public anchor" id="var-float"><h3><a href="#var-float">float</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Float type spec</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L95">view source</a></div></div><div class="public anchor" id="var-get-capacity"><h3><a href="#var-get-capacity">get-capacity</a></h3><div class="usage"><code>(get-capacity _)</code></div><div class="doc"><div class="markdown"><p>Get the read/write capacity in bytes.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/core.cljc#L60">view source</a></div></div><div class="public anchor" id="var-int16"><h3><a href="#var-int16">int16</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Short type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L86">view source</a></div></div><div class="public anchor" id="var-int32"><h3><a href="#var-int32">int32</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Integer type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L89">view source</a></div></div><div class="public anchor" id="var-int64"><h3><a href="#var-int64">int64</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Long type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L92">view source</a></div></div><div class="public anchor" id="var-integer"><h3><a href="#var-integer">integer</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Integer type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L89">view source</a></div></div><div class="public anchor" id="var-into"><h3><a href="#var-into">into</a></h3><div class="usage"><code>(into spec data)</code><code>(into spec data opts)</code></div><div class="doc"><div class="markdown"><p>Returns a buffer of exact size of spec with data already serialized.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/core.cljc#L98">view source</a></div></div><div class="public anchor" id="var-long"><h3><a href="#var-long">long</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Long type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L92">view source</a></div></div><div class="public anchor" id="var-read"><h3><a href="#var-read">read</a></h3><div class="usage"><code>(read &amp; args)</code></div><div class="doc"><div class="markdown"><p>Read data from buffer following the specified spec instance. This function is a friend of <code>read*</code> and it returns only the readed data.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/core.cljc#L91">view source</a></div></div><div class="public anchor" id="var-read*"><h3><a href="#var-read*">read*</a></h3><div class="usage"><code>(read* buff spec)</code><code>(read* buff spec {:keys [offset], :or {offset 0}})</code></div><div class="doc"><div class="markdown"><p>Read data from buffer following the specified spec instance.</p>
<p>This method returns a vector of readed data and the data itself. If you need only data, use <code>read</code> function instead.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/core.cljc#L77">view source</a></div></div><div class="public anchor" id="var-ref-bytes"><h3><a href="#var-ref-bytes">ref-bytes</a></h3><div class="usage"><code>(ref-bytes ref-kw-or-index)</code></div><div class="doc"><div class="markdown"><p>create a dynamic length byte array where the length of the byte array is stored in another spec within the containing indexed spec or associative spec. Example usages: (spec (int16) (int16) (ref-bytes* 1)) (spec :a (int16) :b (int32) (ref-bytes* :b)) where the first example would store the length of the byte array in the second int16 and the second example would store the length of the byte array in the int32 at key :b.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/reference.cljc#L133">view source</a></div></div><div class="public anchor" id="var-ref-string"><h3><a href="#var-ref-string">ref-string</a></h3><div class="usage"><code>(ref-string ref-kw-or-index)</code></div><div class="doc"><div class="markdown"><p>create a dynamic length string where the length of the string is stored in another spec within the containing indexed spec or associative spec. Example usages: (spec (int16) (int16) (ref-string* 1)) (spec :a (int16) :b (int32) (ref-string* :b)) where the first example would store the length of the string in the second int16 and the second example would store the length of the string in the int32 at key :b.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/reference.cljc#L160">view source</a></div></div><div class="public anchor" id="var-repeat"><h3><a href="#var-repeat">repeat</a></h3><div class="usage"><code>(repeat n type)</code></div><div class="doc"><div class="markdown"><p>Creare a composed typespec that repeats <code>n</code> times a provided <code>type</code> spec.</p>
<p>As example, create a spec with help of <code>repeat</code> function:</p>
<pre><code>(def spec (buf/repeat 2 buf/int32))
</code></pre>
<p>Write data into buffer using previously defined typespec:</p>
<pre><code>(buf/write! yourbuffer [200 300] spec)
;; =&gt; 8
</code></pre>
<p>Or read data from your buffer using previously defined typespec:</p>
<pre><code>(buf/read yourbuffer spec)
;; =&gt; [200 300]
</code></pre></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec.cljc#L215">view source</a></div></div><div class="public anchor" id="var-short"><h3><a href="#var-short">short</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Short type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L86">view source</a></div></div><div class="public anchor" id="var-size"><h3><a href="#var-size">size</a></h3><div class="usage"><code>(size _)</code></div><div class="doc"><div class="markdown"><p>Calculate the size in bytes of the object.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/core.cljc#L40">view source</a></div></div><div class="public anchor" id="var-spec"><h3><a href="#var-spec">spec</a></h3><div class="usage"><code>(spec &amp; params)</code></div><div class="doc"><div class="markdown"><p>Polymorphic constructor for Spec instances.</p>
<p>Spec is a some kind of composition of arbitrary number of types in associative or indexed data structure.</p>
<p>Little example on how to create associative composition:</p>
<pre><code>(spec :field1 (long)
      :field2 (string 20))
</code></pre>
<p>An other example on how to create indexed composition that represents the same bytes representation that previous one:</p>
<pre><code>(spec (long) (string 20))
</code></pre>
<p>The main difference between the two reprensentation is that if you read a buffer using an associative spec, the result will be clojure hash-map, and if indexed spec is used, the result will be clojure vector containing the values.</p>
<p>The same rules applies for writing data into a buffer.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec.cljc#L174">view source</a></div></div><div class="public anchor" id="var-string"><h3><a href="#var-string">string</a></h3><div class="usage"><code>(string size)</code></div><div class="doc"><div class="markdown"><p>Fixed length string type spec constructor.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/string.cljc#L111">view source</a></div></div><div class="public anchor" id="var-string*"><h3><a href="#var-string*">string*</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Arbitrary length string type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/string.cljc#L139">view source</a></div></div><div class="public anchor" id="var-ubyte"><h3><a href="#var-ubyte">ubyte</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Unsinged byte type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L124">view source</a></div></div><div class="public anchor" id="var-uint16"><h3><a href="#var-uint16">uint16</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Unsinged int16 type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L118">view source</a></div></div><div class="public anchor" id="var-uint32"><h3><a href="#var-uint32">uint32</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Unsinged int32 type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L121">view source</a></div></div><div class="public anchor" id="var-uint64"><h3><a href="#var-uint64">uint64</a></h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Unsinged int64 type spec.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/basic.cljc#L127">view source</a></div></div><div class="public anchor" id="var-vector*"><h3><a href="#var-vector*">vector*</a></h3><div class="usage"><code>(vector* t)</code></div><div class="doc"><div class="markdown"><p>Create a arbitrary length (dynamic) array like typespec composition for <code>t</code> type.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/spec/collections.cljc#L29">view source</a></div></div><div class="public anchor" id="var-with-byte-order"><h3><a href="#var-with-byte-order">with-byte-order</a></h3><h4 class="type">macro</h4><div class="usage"><code>(with-byte-order byteorder &amp; body)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/core.cljc#L109">view source</a></div></div><div class="public anchor" id="var-write.21"><h3><a href="#var-write.21">write!</a></h3><div class="usage"><code>(write! buff data spec)</code><code>(write! buff data spec {:keys [offset], :or {offset 0}})</code></div><div class="doc"><div class="markdown"><p>Write data into buffer following the specified spec instance.</p></div></div><div class="src-link"><a href="http://github.com/funcool/codeina/blob/master/src/octet/core.cljc#L65">view source</a></div></div></section></section></body></html>