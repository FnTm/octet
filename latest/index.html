<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Andrey Antukh, &lt;niwi@niwi.be&gt;">
<title>bytebuf - A library for working with ByteBuffer&#8217;s</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f0f0f0; }
.listingblock .pygments .tok-c { color: #60a0b0; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #007020; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #007020 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #007020 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #902000 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #40a070 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #4070a0 } /* Literal.String */
.listingblock .pygments .tok-na { color: #4070a0 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #007020 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #60add5 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #555555; font-weight: bold } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #d55537; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #007020 } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #06287e } /* Name.Function */
.listingblock .pygments .tok-nl { color: #002070; font-weight: bold } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #062873; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #bb60d5 } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #007020; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #40a070 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #40a070 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #40a070 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #40a070 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #40a070 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #4070a0 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #4070a0 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #4070a0 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #4070a0 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #c65d09 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #235388 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #4070a0 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #517918 } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #007020 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #bb60d5 } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #bb60d5 } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #bb60d5 } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #40a070 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>bytebuf - A library for working with ByteBuffer&#8217;s</h1>
<div class="details">
<span id="author" class="author">Andrey Antukh, &lt;niwi@niwi.be&gt;</span><br>
<span id="revdate">0.1.0</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_project_maturity">2. Project Maturity</a></li>
<li><a href="#_install">3. Install</a>
<ul class="sectlevel2">
<li><a href="#_requirements">3.1. Requirements</a></li>
<li><a href="#_leiningen">3.2. Leiningen</a></li>
<li><a href="#_get_the_code">3.3. Get the Code</a></li>
</ul>
</li>
<li><a href="#_getting_started">4. Getting started</a>
<ul class="sectlevel2">
<li><a href="#_define_a_spec">4.1. Define a spec</a></li>
<li><a href="#_creating_buffer">4.2. Creating buffer</a></li>
<li><a href="#_read_and_write_data">4.3. Read and write data</a></li>
</ul>
</li>
<li><a href="#_advanced_usage">5. Advanced usage</a>
<ul class="sectlevel2">
<li><a href="#_read_write_with_offset">5.1. Read &amp; Write with offset.</a></li>
<li><a href="#_show_readed_bytes">5.2. Show readed bytes.</a></li>
<li><a href="#_read_write_repeatedly">5.3. Read &amp; Write repeatedly</a></li>
<li><a href="#_using_arbitrary_size_type_specs">5.4. Using arbitrary size type specs</a></li>
<li><a href="#_define_own_type_spec">5.5. Define own type spec</a></li>
</ul>
</li>
<li><a href="#_additional_info">6. Additional info</a>
<ul class="sectlevel2">
<li><a href="#supported-bytebuffers">6.1. Supported byte buffers</a></li>
<li><a href="#_supported_typespecs">6.2. Supported typespecs</a></li>
<li><a href="#_coming_features">6.3. Coming features</a></li>
</ul>
</li>
<li><a href="#_how_to_contribute">7. How to Contribute?</a>
<ul class="sectlevel2">
<li><a href="#_philosophy">7.1. Philosophy</a></li>
<li><a href="#_procedure">7.2. Procedure</a></li>
<li><a href="#_license">7.3. License</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction"><a class="link" href="#_introduction">1. Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Working with raw bytes is tedious, and sometimes the language abstractions for working
with bytes is not very pleasant.</p>
</div>
<div class="paragraph">
<p><em>bytebuf</em> library offers a simple api for working with raw byte arrays and compose binary protocols
for two most used clojure implementations: clojure (jvm) and clojurescript (javascript).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_project_maturity"><a class="link" href="#_project_maturity">2. Project Maturity</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since <em>bytebuf</em> is a young project there can be some API breakage.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install"><a class="link" href="#_install">3. Install</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers the <em>bytebuf</em> library installing process and its requirements.</p>
</div>
<div class="sect2">
<h3 id="_requirements"><a class="link" href="#_requirements">3.1. Requirements</a></h3>
<div class="paragraph">
<p><em>bytebuf</em> is tested with these platforms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK7</p>
</li>
<li>
<p>JDK8</p>
</li>
<li>
<p>Node 0.12</p>
</li>
<li>
<p>iojs 1.4.1</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_leiningen"><a class="link" href="#_leiningen">3.2. Leiningen</a></h3>
<div class="paragraph">
<p>The simplest way to use <em>suricatta</em> in a clojure project, is by including it in the dependency
vector on your <strong><em>project.clj</em></strong> file:</p>
</div>
<div class="listingblock">
<div class="title"><em>on project.clj</em></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">[</span><span class="tok-nv">funcool/bytebuf</span> <span class="tok-s">&quot;0.1.0&quot;</span><span class="tok-p">]</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_get_the_code"><a class="link" href="#_get_the_code">3.3. Get the Code</a></h3>
<div class="paragraph">
<p><em>bytebuf</em> is open source and can be found on <a href="https://github.com/funcool/bytebuf">github</a>.</p>
</div>
<div class="paragraph">
<p>You can clone the public repository with this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="text">git clone https://github.com/funcool/bytebuf</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="link" href="#_getting_started">4. Getting started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main goal of <em>bytebuf</em> is provide, multiplatform abstraction for work with bytebuffer&#8217;s. For it
offers a ligweight api for define message types in a declarative way and use them for read or
write to bytebuffers.</p>
</div>
<div class="paragraph">
<p>As previously said, <em>bytebuf</em>  works with both most used clojure implementations: clojure &amp; clojurescript. Each platform has own bytebuffer like types. <em>bytebuf</em> library offers implementations for <a href="http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html">NIO ByteBuffer</a> and <a href="http://netty.io/4.1/api/io/netty/buffer/ByteBuf.html">Netty ByteBuf</a> in clojure and <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Typed_arrays">es6 typed arrays</a> in clojurescript.</p>
</div>
<div class="sect2">
<h3 id="_define_a_spec"><a class="link" href="#_define_a_spec">4.1. Define a spec</a></h3>
<div class="paragraph">
<p>A spec in <em>bytebuf</em> glossary represents a type definition or a composition of types. Two most common
composition types are: associative and indexed.</p>
</div>
<div class="paragraph">
<p>The difference of indexed and associative compositions is the input and output. In associative
composition the expected input and output is a map like object. And in indexed composition,
the expected input and input is a vector like objects. Internally them represents the same value in
bytes.</p>
</div>
<div class="paragraph">
<p>Let start defining one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">require</span> <span class="tok-o">&#39;</span><span class="tok-p">[</span><span class="tok-nv">bytebuff.core</span> <span class="tok-ss">:as</span> <span class="tok-nv">buf</span><span class="tok-p">])</span>

<span class="tok-c1">;; Indexed composition</span>
<span class="tok-p">(</span><span class="tok-k">def </span><span class="tok-nv">my-spec1</span> <span class="tok-p">(</span><span class="tok-nf">buf/spec</span> <span class="tok-p">(</span><span class="tok-nf">buf/int32</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nf">buf/bool</span><span class="tok-p">)))</span>

<span class="tok-c1">;; The same spec but using associative composition</span>
<span class="tok-p">(</span><span class="tok-k">def </span><span class="tok-nv">my-spec2</span> <span class="tok-p">(</span><span class="tok-nf">buf/spec</span> <span class="tok-ss">:field1</span> <span class="tok-p">(</span><span class="tok-nf">buf/int32</span><span class="tok-p">)</span>
                        <span class="tok-ss">:field2</span> <span class="tok-p">(</span><span class="tok-nf">buf/bool</span><span class="tok-p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can check that the spec size (in bytes) and number of types internally is the same
for both defined specs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/size</span> <span class="tok-nv">my-spec1</span><span class="tok-p">)</span>
<span class="tok-c1">;; =&gt; 5</span>

<span class="tok-p">(</span><span class="tok-nb">count </span><span class="tok-nv">my-spec1</span><span class="tok-p">)</span>
<span class="tok-c1">;; =&gt; 2</span>

<span class="tok-p">(</span><span class="tok-nf">buf/size</span> <span class="tok-nv">my-spec2</span><span class="tok-p">)</span>
<span class="tok-c1">;; =&gt; 5</span>

<span class="tok-p">(</span><span class="tok-nb">count </span><span class="tok-nv">my-spec2</span><span class="tok-p">)</span>
<span class="tok-c1">;; =&gt; 2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>spec</code> is a polimorphic constructor for type specs compostion, that dependently of specified
arguments, creates a indexed composition instance or associatieve.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_buffer"><a class="link" href="#_creating_buffer">4.2. Creating buffer</a></h3>
<div class="paragraph">
<p>The next piece in the puzzle is a way to create (or allocate) new byte buffers. This operation is
almost platform independent if the defaults satisfies you.</p>
</div>
<div class="listingblock">
<div class="title">Example allocating a 24 bytes size byte buffer with <strong>default</strong> implementation:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-c1">;; Allocate bytebuffer with 24 bytes of size</span>
<span class="tok-p">(</span><span class="tok-k">def </span><span class="tok-nv">buffer</span> <span class="tok-p">(</span><span class="tok-nf">buf/allocate</span> <span class="tok-mi">24</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example allocating a 24 bytes size byte buffer of <strong>heap</strong> type using <strong>NIO</strong> implementation:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-c1">;; This is a default if you are using clojure</span>
<span class="tok-p">(</span><span class="tok-k">def </span><span class="tok-nv">buffer</span> <span class="tok-p">(</span><span class="tok-nf">buf/allocate</span> <span class="tok-mi">24</span> <span class="tok-p">{</span><span class="tok-ss">:impl</span> <span class="tok-ss">:nio</span> <span class="tok-ss">:type</span> <span class="tok-ss">:heap</span><span class="tok-p">}))</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example allocating a 24 bytes size byte buffer of <strong>heap</strong> type using <strong>es6 typed arrays</strong> implementation:</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-c1">;; This is a default if you are using clojurescript</span>
<span class="tok-p">(</span><span class="tok-k">def </span><span class="tok-nv">buffer</span> <span class="tok-p">(</span><span class="tok-nf">buf/allocate</span> <span class="tok-mi">24</span> <span class="tok-p">{</span><span class="tok-ss">:impl</span> <span class="tok-ss">:es6</span> <span class="tok-ss">:type</span> <span class="tok-ss">:heap</span><span class="tok-p">}))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see all supported options <a href="#supported-bytebuffers">here</a></p>
</div>
<div class="paragraph">
<p>The return value of <code>allocate</code> depens on implementation used. Is a plain instance without additional
wrapping. If you want access to its internals, you can do it with native host platform api.</p>
</div>
</div>
<div class="sect2">
<h3 id="_read_and_write_data"><a class="link" href="#_read_and_write_data">4.3. Read and write data</a></h3>
<div class="paragraph">
<p>It&#8217;s time to see how we can write data to buffers and read data from them. Specs are simple schema
on how the data should be read or write to the buffer.</p>
</div>
<div class="listingblock">
<div class="title">Example writing data into buffer using indexed composed schema</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-c1">;; The indexed composed spec exptects a vector as input</span>
<span class="tok-p">(</span><span class="tok-nf">buf/write!</span> <span class="tok-nv">buffer</span> <span class="tok-p">[</span><span class="tok-mi">22</span> <span class="tok-nv">true</span><span class="tok-p">]</span> <span class="tok-nv">my-spec1</span><span class="tok-p">)</span>
<span class="tok-c1">;; =&gt; 5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>write!</code> function  returns a number of bytes are written into buffer.</p>
</div>
<div class="paragraph">
<p>As, previously mentioned, indexed and associative specs with same fields (in same order) represents
the identical byte layout. Knowing that, we also can do the same operation but using the associative
spec defined previously:</p>
</div>
<div class="listingblock">
<div class="title">Example writing data into buffer using a map as input</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/write!</span> <span class="tok-nv">buffer</span> <span class="tok-p">{</span><span class="tok-ss">:field1</span> <span class="tok-mi">22</span> <span class="tok-ss">:field2</span> <span class="tok-nv">true</span><span class="tok-p">}</span> <span class="tok-nv">my-spec2</span><span class="tok-p">)</span>
<span class="tok-c1">;; =&gt; 5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Secondly, the read operation is mostly similar to write one. It reads from buffer following the
spec data definition and return corresponding data structure or plain value.</p>
</div>
<div class="listingblock">
<div class="title">Example reading data using indexed spec.</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/read</span> <span class="tok-nv">buffer</span> <span class="tok-nv">my-spec1</span><span class="tok-p">)</span>
<span class="tok-c1">;; =&gt; [22 true]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, you can perform the same operation, but using a associative spec:</p>
</div>
<div class="listingblock">
<div class="title">Example reading data using associative spec.</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/read</span> <span class="tok-nv">buffer</span> <span class="tok-nv">my-spec2</span><span class="tok-p">)</span>
<span class="tok-c1">;; =&gt; {:field1 22 :field2 true}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This works idependently of implementation used for allocate the buffer. Some implementations
has little limitations, es6 (cljs) as example, des not support <code>int64</code> typespec due to platform
limitations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Composed type specs and plain value type specs implements the same abstraction and both can be used
directly in read and write operations.</p>
</div>
<div class="listingblock">
<div class="title">Use <strong>int16</strong> as spec for read from buffer.</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/read</span> <span class="tok-nv">buffer</span> <span class="tok-p">(</span><span class="tok-nf">buf/int16</span><span class="tok-p">))</span>
<span class="tok-c1">;; =&gt; 22</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_usage"><a class="link" href="#_advanced_usage">5. Advanced usage</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_read_write_with_offset"><a class="link" href="#_read_write_with_offset">5.1. Read &amp; Write with offset.</a></h3>
<div class="paragraph">
<p>If you know that the data what you want read is located in a specific position in a buffer, you
can specify it in a read or write operation:</p>
</div>
<div class="listingblock">
<div class="title">Example writing data in specific offset</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/write</span> <span class="tok-nv">buffer</span> <span class="tok-p">[</span><span class="tok-mi">0</span> <span class="tok-nv">false</span><span class="tok-p">]</span> <span class="tok-nv">my-spec1</span> <span class="tok-p">{</span><span class="tok-ss">:offset</span> <span class="tok-mi">20</span><span class="tok-p">})</span>
<span class="tok-c1">;; =&gt; [0 false]</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example read data from specific offset.</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/read</span> <span class="tok-nv">buffer</span> <span class="tok-nv">my-spec1</span> <span class="tok-p">{</span><span class="tok-ss">:offset</span> <span class="tok-mi">20</span><span class="tok-p">})</span>
<span class="tok-c1">;; =&gt; [0 false]</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_show_readed_bytes"><a class="link" href="#_show_readed_bytes">5.2. Show readed bytes.</a></h3>
<div class="paragraph">
<p>The default <code>read</code> function returns readed data but not returns a amount of readed bytes. For it,
<em>bytebuf</em> exposes a convenience function <code>read*</code> that instead of return only readed data, returns
a vector with amount of bytes readed and the readed data:</p>
</div>
<div class="listingblock">
<div class="title">Example using <code>read*</code> function</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/read*</span> <span class="tok-nv">buffer</span> <span class="tok-nv">my-spec2</span><span class="tok-p">)</span>
<span class="tok-c1">;; =&gt; [5 {:field1 22 :field2 true}]</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_read_write_repeatedly"><a class="link" href="#_read_write_repeatedly">5.3. Read &amp; Write repeatedly</a></h3>
<div class="paragraph">
<p>At this moment, <em>bytebuf</em> does not incluedes facilities for create repeated compositions, but it can
be solved using normal clojure primitives for it.</p>
</div>
<div class="listingblock">
<div class="title">Example repeatedly write data into buffer using the same spec.</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-k">def </span><span class="tok-nv">spec</span> <span class="tok-p">(</span><span class="tok-nf">buf/spec</span> <span class="tok-p">(</span><span class="tok-nf">buf/int16</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nf">buf/int16</span><span class="tok-p">)))</span>

<span class="tok-p">(</span><span class="tok-nb">reduce </span><span class="tok-p">(</span><span class="tok-k">fn </span><span class="tok-p">[</span><span class="tok-nv">offset</span> <span class="tok-nv">data</span><span class="tok-p">]</span>
          <span class="tok-p">(</span><span class="tok-k">let </span><span class="tok-p">[</span><span class="tok-nv">written</span> <span class="tok-p">(</span><span class="tok-nf">buf/write!</span> <span class="tok-nv">buffer</span> <span class="tok-nv">data</span> <span class="tok-nv">spec</span> <span class="tok-p">{</span><span class="tok-ss">:offset</span> <span class="tok-nv">offset</span><span class="tok-p">})]</span>
            <span class="tok-p">(</span><span class="tok-nb">+ </span><span class="tok-nv">offset</span> <span class="tok-nv">written</span><span class="tok-p">)))</span>
        <span class="tok-mi">0</span>
        <span class="tok-p">[[</span><span class="tok-mi">1</span> <span class="tok-mi">2</span><span class="tok-p">]</span> <span class="tok-p">[</span><span class="tok-mi">3</span> <span class="tok-mi">4</span><span class="tok-p">]</span> <span class="tok-p">[</span><span class="tok-mi">5</span> <span class="tok-mi">6</span><span class="tok-p">]])</span>
<span class="tok-c1">;; =&gt; 12</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example read three times from buffer using the same spec</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nb">reduce </span><span class="tok-p">(</span><span class="tok-k">fn </span><span class="tok-p">[</span><span class="tok-nv">acc</span> <span class="tok-nv">offset</span><span class="tok-p">]</span>
          <span class="tok-p">(</span><span class="tok-nb">conj </span><span class="tok-nv">acc</span> <span class="tok-p">(</span><span class="tok-nf">buf/read</span> <span class="tok-nv">buffer</span> <span class="tok-nv">spec</span> <span class="tok-p">{</span><span class="tok-ss">:offset</span> <span class="tok-nv">offset</span><span class="tok-p">})))</span>
        <span class="tok-p">[]</span>
        <span class="tok-p">(</span><span class="tok-nb">range </span><span class="tok-mi">0</span> <span class="tok-mi">10</span> <span class="tok-mi">4</span><span class="tok-p">))</span>
<span class="tok-c1">;; =&gt; [[1 2] [3 4] [5 6]]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In future versions, this surelly will be improved providing facilities for
create repeated compositions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_arbitrary_size_type_specs"><a class="link" href="#_using_arbitrary_size_type_specs">5.4. Using arbitrary size type specs</a></h3>
<div class="paragraph">
<p>Until now, we have seen examples alway using fixed size compositions. Fixed size compositions
are easy understand, the size of the spec can be know in any time. But in some circumstances
we want store arbitrary length types.</p>
</div>
<div class="paragraph">
<p>Arbitrary lenght strings is a clear example, and <em>bytebuf</em> comes with that type spec implemented:</p>
</div>
<div class="listingblock">
<div class="title">Example writing arbitrary length string into buffer</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/write!</span> <span class="tok-nv">buffer</span> <span class="tok-s">&quot;hello world&quot;</span> <span class="tok-p">(</span><span class="tok-nf">buf/string*</span><span class="tok-p">))</span>
<span class="tok-c1">;; =&gt; 15</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example reading arbitrary length string from buffer</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/read</span> <span class="tok-nv">buffer</span> <span class="tok-p">(</span><span class="tok-nf">buf/string*</span><span class="tok-p">))</span>
<span class="tok-c1">;; =&gt; &quot;hello world&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>But, how it works? Type specs like that, is a composition of two typespecs: <strong>int32</strong> and
fixed length <strong>string</strong>. On write phase, it calculates the size of string, writes firstly the size
as <code>int32</code> following of fixed size string. The read phase is like write but in backward direction.</p>
</div>
<div class="paragraph">
<p>Also, the size of that type spec depends on data and can not be known outsize of read/write phase:</p>
</div>
<div class="listingblock">
<div class="title">Example how obtain a size of specific type spec</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">buf/size</span> <span class="tok-p">(</span><span class="tok-nf">buf/int16</span><span class="tok-p">))</span>
<span class="tok-c1">;; =&gt; 2</span>

<span class="tok-p">(</span><span class="tok-nf">buf/size</span> <span class="tok-p">(</span><span class="tok-nf">buf/string*</span><span class="tok-p">))</span>
<span class="tok-c1">;; =&gt; IllegalArgumentException No implementation of method: :size of protocol: #&#39;bytebuf.proto/IStaticSize found for class: bytebuf.spec.string$string_STAR_$reify__1804  clojure.core/-cache-protocol-fn (core_deftype.clj:555)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_define_own_type_spec"><a class="link" href="#_define_own_type_spec">5.5. Define own type spec</a></h3>
<div class="paragraph">
<p>In some circumstances, you probably need define own typespec for solve concrete situations. <em>bytebuf</em>
is build around abstractions and define new type spec is not very complicated job.</p>
</div>
<div class="paragraph">
<p>An typespec consists mainly in <code>ISpec</code> protocol that has two methods: <code>read</code> and <code>write</code>. Let
see an example defining a typespec for point of coordenades:</p>
</div>
<div class="listingblock">
<div class="title">Example definition of type spec that represents a point</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-nf">require</span> <span class="tok-o">&#39;</span><span class="tok-p">[</span><span class="tok-nv">bytebuf.spec</span> <span class="tok-ss">:as</span> <span class="tok-nv">spec</span><span class="tok-p">])</span>

<span class="tok-c1">;; Imagine you have a type Point defined like this:</span>
<span class="tok-p">(</span><span class="tok-kd">defrecord </span><span class="tok-nv">Point</span> <span class="tok-p">[</span><span class="tok-nv">x</span> <span class="tok-nv">y</span><span class="tok-p">])</span>

<span class="tok-c1">;; Type spec definition for read/write Point instances.</span>
<span class="tok-p">(</span><span class="tok-kd">defn </span><span class="tok-nv">point</span> <span class="tok-p">[]</span>
  <span class="tok-p">(</span><span class="tok-nf">reify</span>
    <span class="tok-nv">spec/ISpecSize</span>
    <span class="tok-p">(</span><span class="tok-nf">size</span> <span class="tok-p">[</span><span class="tok-nv">_</span><span class="tok-p">]</span>
      <span class="tok-c1">;; we kwno that is datatype has fixed size in bytes</span>
      <span class="tok-c1">;; that represents two int32.</span>
      <span class="tok-mi">8</span><span class="tok-p">)</span>

    <span class="tok-nv">spec/ISpec</span>
    <span class="tok-p">(</span><span class="tok-nb">read </span><span class="tok-p">[</span><span class="tok-nv">_</span> <span class="tok-nv">buff</span> <span class="tok-nv">pos</span><span class="tok-p">]</span>
      <span class="tok-p">(</span><span class="tok-k">let </span><span class="tok-p">[[</span><span class="tok-nv">readed</span> <span class="tok-nv">xvalue</span><span class="tok-p">]</span> <span class="tok-p">(</span><span class="tok-nf">spec/read</span> <span class="tok-p">(</span><span class="tok-nf">buf/int32</span><span class="tok-p">)</span> <span class="tok-nv">buff</span> <span class="tok-nv">pos</span><span class="tok-p">)</span>
            <span class="tok-p">[</span><span class="tok-nv">readed</span><span class="tok-o">&#39;</span> <span class="tok-nv">yvalue</span><span class="tok-p">]</span> <span class="tok-p">(</span><span class="tok-nf">spec/read</span> <span class="tok-p">(</span><span class="tok-nf">buf/int32</span><span class="tok-p">)</span> <span class="tok-nv">buff</span> <span class="tok-p">(</span><span class="tok-nb">+ </span><span class="tok-nv">pos</span> <span class="tok-nv">readed</span><span class="tok-p">))]</span>
        <span class="tok-p">[(</span><span class="tok-nb">+ </span><span class="tok-nv">readed</span> <span class="tok-nv">readed</span><span class="tok-o">&#39;</span><span class="tok-p">)</span>
         <span class="tok-p">(</span><span class="tok-nf">Point.</span> <span class="tok-nv">xvalue</span> <span class="tok-nv">yvalue</span><span class="tok-p">)]))</span>

    <span class="tok-p">(</span><span class="tok-nf">write</span> <span class="tok-p">[</span><span class="tok-nv">_</span> <span class="tok-nv">buff</span> <span class="tok-nv">pos</span> <span class="tok-nv">point</span><span class="tok-p">]</span>
      <span class="tok-p">(</span><span class="tok-k">let </span><span class="tok-p">[</span><span class="tok-nv">written</span> <span class="tok-p">(</span><span class="tok-nf">spec/write</span> <span class="tok-p">(</span><span class="tok-nf">buf/int32</span><span class="tok-p">)</span> <span class="tok-nv">buff</span> <span class="tok-nv">pos</span> <span class="tok-p">(</span><span class="tok-ss">:x</span> <span class="tok-nv">point</span><span class="tok-p">))</span>
            <span class="tok-nv">written</span><span class="tok-o">&#39;</span> <span class="tok-p">(</span><span class="tok-nf">spec/write</span> <span class="tok-p">(</span><span class="tok-nf">buf/int32</span><span class="tok-p">)</span> <span class="tok-nv">buff</span> <span class="tok-p">(</span><span class="tok-nb">+ </span><span class="tok-nv">pos</span> <span class="tok-nv">written</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-ss">:y</span> <span class="tok-nv">point</span><span class="tok-p">))]</span>
        <span class="tok-p">(</span><span class="tok-nb">+ </span><span class="tok-nv">written</span> <span class="tok-nv">written</span><span class="tok-o">&#39;</span><span class="tok-p">)))))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And, here, an example on how to use the previously defined type spec: <strong>point</strong> for read and write
<strong>Point</strong> instances to the buffer. Let&#8217;s go to see an example:</p>
</div>
<div class="listingblock">
<div class="title">Example using the previously defined typespec</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="clojure"><span class="tok-p">(</span><span class="tok-k">def </span><span class="tok-nv">mypoint</span> <span class="tok-p">(</span><span class="tok-nf">Point.</span> <span class="tok-mi">1</span> <span class="tok-mi">2</span><span class="tok-p">))</span>

<span class="tok-p">(</span><span class="tok-nf">buf/write!</span> <span class="tok-nv">buffer</span> <span class="tok-nv">mypoint</span> <span class="tok-p">(</span><span class="tok-nf">point</span><span class="tok-p">))</span>
<span class="tok-c1">;; =&gt; 8</span>

<span class="tok-p">(</span><span class="tok-nf">buf/read*</span> <span class="tok-nv">buffer</span> <span class="tok-p">(</span><span class="tok-nf">point</span><span class="tok-p">))</span>
<span class="tok-c1">;; =&gt; [8 #user.Point{:x 1, :y 2}]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_info"><a class="link" href="#_additional_info">6. Additional info</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="supported-bytebuffers"><a class="link" href="#supported-bytebuffers">6.1. Supported byte buffers</a></h3>
<div class="paragraph">
<p>This is a complete table of supported byte buffer implementations and type of byte buffers:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Platform</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Params</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clojure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Heap NIO ByteBuffer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{:type :heap :impl :nio}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clojure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Direct NIO ByteBuffer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{:type :direct :impl :nio}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clojure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Heap Netty ByteBuf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{:type :heap :impl :netty}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clojure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Direct Netty ByteBuf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{:type :direct :impl :netty}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ClojureScript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Heap ES6 ArrayBuffer/DataView</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{:type :heap :impl :es6}</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_supported_typespecs"><a class="link" href="#_supported_typespecs">6.2. Supported typespecs</a></h3>
<div class="paragraph">
<p>This is a complete list of supported plain value type spec:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Function</th>
<th class="tableblock halign-left valign-top">Size (in bytes)</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buf/int16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buf/int32</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buf/int64</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only on jvm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buf/float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buf/double</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buf/bool</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buf/byte</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buf/string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fixed length string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buf/string*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4+N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arbitrary length string</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Independently if a spec is a value spec or a composition of value specs, all them
implements the same abstraction and can be used in read or write operations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_coming_features"><a class="link" href="#_coming_features">6.3. Coming features</a></h3>
<div class="ulist">
<ul>
<li>
<p><strong>memoryviews</strong>: abstraction for random read/write access to buffer without parsing
all spec related data.</p>
</li>
<li>
<p>nodejs/iojs buffer support.</p>
</li>
<li>
<p>more function for create compositions like repeated type, or key value pairs.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_to_contribute"><a class="link" href="#_how_to_contribute">7. How to Contribute?</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_philosophy"><a class="link" href="#_philosophy">7.1. Philosophy</a></h3>
<div class="paragraph">
<p>Five most important rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Beautiful is better than ugly.</p>
</li>
<li>
<p>Explicit is better than implicit.</p>
</li>
<li>
<p>Simple is better than complex.</p>
</li>
<li>
<p>Complex is better than complicated.</p>
</li>
<li>
<p>Readability counts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All contributions to <em>bytebuf</em> should keep these important rules in mind.</p>
</div>
</div>
<div class="sect2">
<h3 id="_procedure"><a class="link" href="#_procedure">7.2. Procedure</a></h3>
<div class="paragraph">
<p><strong>bytebuf</strong> unlike Clojure and other Clojure contrib libs, does not have many
restrictions for contributions. Just follow the following steps depending on the
situation:</p>
</div>
<div class="paragraph">
<p><strong>Bugfix</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fork the GitHub repo.</p>
</li>
<li>
<p>Fix a bug/typo on a new branch.</p>
</li>
<li>
<p>Make a pull-request to master.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>New feature</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open new issue with the new feature proposal.</p>
</li>
<li>
<p>If it is accepted, follow the same steps as "bugfix".</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_license"><a class="link" href="#_license">7.3. License</a></h3>
<div class="paragraph">
<p><em>bytebuf</em> is licensed under BSD (2-Clause) license:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Copyright (c) 2015 Andrey Antukh &lt;niwi@niwi.be&gt;

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-03-01 11:49:13 CET
</div>
</div>
</body>
</html>